{"ast":null,"code":"import _objectSpread from\"C:/WorkConnect/WorkConnect/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{useSignup}from\"../../../contexts/SignupContext\";import{signup,login as apiLogin}from\"../../../api/auth\";import{useAuth}from\"../../../contexts/AuthContext\";import\"../signup.css\";import SignupProgress from\"../SignupProgress\";import{useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SignUp04(){const navigate=useNavigate();const{data,update,setCurrentStep}=useSignup();const auth=useAuth();useEffect(()=>setCurrentStep(4),[setCurrentStep]);const[loading,setLoading]=useState(false);const[jobType,setJobType]=useState(data.jobType||'full-time');const onFinish=async()=>{try{var _result$profile,_auth$profile;setLoading(true);const payload=_objectSpread(_objectSpread({},data),{},{jobType});update({jobType});const result=await signup(payload);// store returned profile/userId in signup context\nupdate(_objectSpread(_objectSpread({},result.profile),{},{userId:result.userId}));// automatically login so client has a token and profile loaded\ntry{// prefer using password from signup context if present\nconst pw=data.password;if(pw){const loginRes=await apiLogin({email:data.email,password:pw});// set auth state\nif(loginRes&&loginRes.token){// use auth context setter\nawait auth.login(data.email,pw);}}}catch(e){console.warn('Auto-login failed',e);}// On success, navigate to role-specific dashboard\n// determine role from signup data, result.profile, or auth context\nconst role=data.role||(result===null||result===void 0?void 0:(_result$profile=result.profile)===null||_result$profile===void 0?void 0:_result$profile.role)||((_auth$profile=auth.profile)===null||_auth$profile===void 0?void 0:_auth$profile.role);if(role==='employer')navigate('/employer/dashboard');else navigate('/jobhunter/dashboard');}catch(err){console.error(err);alert((err===null||err===void 0?void 0:err.message)||'Failed to finish signup');}finally{setLoading(false);}};// verification UI state (accept any code locally)\nconst[code,setCode]=useState('');const onVerifyAndFinish=async()=>{if(!code)return alert('Enter verification code');// In local/dev mode we accept any code — proceed to finish\nawait onFinish();};return/*#__PURE__*/_jsxs(\"div\",{className:\"signup01-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"signup01-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"signup-back-icon\",onClick:()=>navigate('/signup-03'),\"aria-label\":\"Go back\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"18\",height:\"18\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M15 18L9 12L15 6\",stroke:\"#233038\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})}),/*#__PURE__*/_jsx(SignupProgress,{currentStep:4})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"signup01-title\",children:\"Finish and Submit\"}),/*#__PURE__*/_jsx(\"p\",{className:\"small-note\",children:\"Review your information below, enter the verification code we sent, then finish signup.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup-card\",style:{marginTop:12},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",data.firstName||'',\" \",data.lastName||'']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",data.email||'']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone:\"}),\" \",data.phone||'']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",(data.addressLine?data.addressLine+', ':'')+(data.city||'')+(data.stateprovince?', '+data.stateprovince:'')+(data.postalCode?' '+data.postalCode:'')]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Headline:\"}),\" \",data.headline||'']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Skills:\"}),\" \",(data.skills||[]).join(', ')]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Resume:\"}),\" \",data.resumeUrl?/*#__PURE__*/_jsx(\"a\",{href:data.resumeUrl,target:\"_blank\",rel:\"noreferrer\",children:\"View\"}):'Not provided']})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"signup01-continue\",onClick:onFinish,disabled:loading,children:loading?'Saving...':'Finish and Continue'})})]});}export default SignUp04;","map":{"version":3,"names":["React","useState","useNavigate","useSignup","signup","login","apiLogin","useAuth","SignupProgress","useEffect","jsx","_jsx","jsxs","_jsxs","SignUp04","navigate","data","update","setCurrentStep","auth","loading","setLoading","jobType","setJobType","onFinish","_result$profile","_auth$profile","payload","_objectSpread","result","profile","userId","pw","password","loginRes","email","token","e","console","warn","role","err","error","alert","message","code","setCode","onVerifyAndFinish","className","children","onClick","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","currentStep","style","marginTop","firstName","lastName","phone","addressLine","city","stateprovince","postalCode","headline","skills","join","resumeUrl","href","target","rel","disabled"],"sources":["C:/WorkConnect/WorkConnect/frontend/src/pages/signup/jobhunter/SignUp04.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useSignup } from \"../../../contexts/SignupContext\";\r\nimport { signup, login as apiLogin } from \"../../../api/auth\";\r\nimport { useAuth } from \"../../../contexts/AuthContext\";\r\nimport \"../signup.css\";\r\nimport SignupProgress from \"../SignupProgress\";\r\nimport { useEffect } from \"react\";\r\n\r\nfunction SignUp04() {\r\n  const navigate = useNavigate();\r\n  const { data, update, setCurrentStep } = useSignup();\r\n  const auth = useAuth();\r\n  useEffect(() => setCurrentStep(4), [setCurrentStep]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [jobType, setJobType] = useState(data.jobType || 'full-time');\r\n\r\n  const onFinish = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const payload = { ...data, jobType };\r\n      update({ jobType });\r\n      const result = await signup(payload);\r\n      // store returned profile/userId in signup context\r\n      update({ ...result.profile, userId: result.userId });\r\n\r\n      // automatically login so client has a token and profile loaded\r\n      try {\r\n        // prefer using password from signup context if present\r\n        const pw = data.password;\r\n        if (pw) {\r\n          const loginRes = await apiLogin({ email: data.email, password: pw });\r\n          // set auth state\r\n          if (loginRes && loginRes.token) {\r\n            // use auth context setter\r\n            await auth.login(data.email, pw);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.warn('Auto-login failed', e);\r\n      }\r\n\r\n  // On success, navigate to role-specific dashboard\r\n  // determine role from signup data, result.profile, or auth context\r\n  const role = data.role || result?.profile?.role || auth.profile?.role;\r\n  if (role === 'employer') navigate('/employer/dashboard');\r\n  else navigate('/jobhunter/dashboard');\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(err?.message || 'Failed to finish signup');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // verification UI state (accept any code locally)\r\n  const [code, setCode] = useState('');\r\n\r\n  const onVerifyAndFinish = async () => {\r\n    if (!code) return alert('Enter verification code');\r\n    // In local/dev mode we accept any code — proceed to finish\r\n    await onFinish();\r\n  };\r\n\r\n  return (\r\n    <div className=\"signup01-container\">\r\n      <div className=\"signup01-header\">\r\n        <button className=\"signup-back-icon\" onClick={() => navigate('/signup-03')} aria-label=\"Go back\">\r\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\">\r\n            <path d=\"M15 18L9 12L15 6\" stroke=\"#233038\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n          </svg>\r\n        </button>\r\n        <SignupProgress currentStep={4} />\r\n      </div>\r\n      <h1 className=\"signup01-title\">Finish and Submit</h1>\r\n      <p className=\"small-note\">Review your information below, enter the verification code we sent, then finish signup.</p>\r\n\r\n      {/* summary view (readable) */}\r\n      <div className=\"signup-card\" style={{ marginTop: 12 }}>\r\n        <div><strong>Name:</strong> {data.firstName || ''} {data.lastName || ''}</div>\r\n        <div><strong>Email:</strong> {data.email || ''}</div>\r\n        <div><strong>Phone:</strong> {data.phone || ''}</div>\r\n        <div><strong>Location:</strong> {(data.addressLine ? data.addressLine + ', ' : '') + (data.city || '') + (data.stateprovince ? ', ' + data.stateprovince : '') + (data.postalCode ? ' ' + data.postalCode : '')}</div>\r\n        <div><strong>Headline:</strong> {data.headline || ''}</div>\r\n        <div><strong>Skills:</strong> {(data.skills || []).join(', ')}</div>\r\n        <div><strong>Resume:</strong> {data.resumeUrl ? <a href={data.resumeUrl} target=\"_blank\" rel=\"noreferrer\">View</a> : 'Not provided'}</div>\r\n      </div>\r\n\r\n      <div className=\"form-actions\">\r\n        <button className=\"signup01-continue\" onClick={onFinish} disabled={loading}>{loading ? 'Saving...' : 'Finish and Continue'}</button>\r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignUp04;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}